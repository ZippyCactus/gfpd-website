<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Apply to join the Great Falls Police Department. Complete your employment application online.">
    <meta name="keywords" content="Police Application, Law Enforcement Application, Great Falls Police Jobs, GFPD Application">
    
    <title>Application | Great Falls Police Department</title>
    
    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicons/favicon-16x16.png">
    <link rel="manifest" href="assets/favicons/site.webmanifest">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Roboto', sans-serif; background-color: #111827; }
        h1, h2, h3, h4, h5, h6 { font-family: 'Oswald', sans-serif; }
        .fade-in-up { opacity: 0; transform: translateY(30px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .fade-in-up.is-visible { opacity: 1; transform: translateY(0); }
        
        /* Ensure form takes full remaining space */
        #adobe-form-wrapper {
            min-height: calc(100vh - 200px);
        }
        
        /* Remove any constraints on Adobe form elements */
        #adobe-form-wrapper iframe,
        #adobe-form-wrapper > div {
            width: 100% !important;
            min-height: calc(100vh - 200px) !important;
        }
    </style>
</head>
<body class="text-gray-300">

    <header id="header" class="bg-gray-900/80 backdrop-blur-sm sticky top-0 z-50 transition-all duration-300">
        <nav class="container mx-auto px-6 py-3">
            <div class="flex items-center justify-between">
                <a href="./index.html" class="flex items-center space-x-3">
                    <img src="./assets/gfpd-badge.png" alt="Great Falls Police Department Badge" class="h-12 w-auto">
                    <div class="flex flex-col">
                        <span class="text-xl font-bold uppercase tracking-wider text-white">Great Falls</span>
                        <span class="text-sm font-semibold uppercase tracking-widest text-amber-400">Police Department</span>
                    </div>
                </a>
                
                <div class="hidden md:flex items-center space-x-8">
                    <a href="./" class="text-gray-300 hover:text-amber-400 transition-colors duration-300">Home</a>
                    <a href="./contact" class="text-gray-300 hover:text-amber-400 transition-colors duration-300">Contact</a>
                    <a href="./events" class="text-gray-300 hover:text-amber-400 transition-colors duration-300">Events</a>
                    <a href="./recruitment" class="text-gray-300 hover:text-amber-400 transition-colors duration-300">Recruitment</a>
                    <a href="./resources" class="text-gray-300 hover:text-amber-400 transition-colors duration-300">Resources</a>
                </div>

                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-white focus:outline-none" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
                    </button>
                </div>
            </div>

            <div id="mobile-menu" class="hidden md:hidden mt-4">
                <a href="./" class="block py-2 px-4 text-sm text-gray-300 hover:bg-gray-700 rounded">Home</a>
                <a href="./contact" class="block py-2 px-4 text-sm text-gray-300 hover:bg-gray-700 rounded">Contact</a>
                <a href="./events" class="block py-2 px-4 text-sm text-gray-300 hover:bg-gray-700 rounded">Events</a>
                <a href="./recruitment" class="block py-2 px-4 text-sm text-gray-300 hover:bg-gray-700 rounded">Recruitment</a>
                <a href="./resources" class="block py-2 px-4 text-sm text-gray-300 hover:bg-gray-700 rounded">Resources</a>
            </div>
        </nav>
    </header>

    <main>
        <!-- Header text (minimal styling) -->
        <div class="bg-gray-900 py-8">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-xl font-bold text-white uppercase tracking-wider mb-2">Employment Application</h2>
                <p class="mt-4 text-lg text-gray-400">If you meet the <a href="./recruitment#recruitment-info" id="requirements-link" class="text-amber-400 hover:underline">requirements</a> and are ready to serve, we invite you to fill out the form below.</p>
            </div>
        </div>
        
        <!-- Back link (sitting above form) -->
        <div class="bg-gray-900 py-2">
            <div class="px-6">
                <a href="./recruitment" class="inline-flex items-center text-amber-400 hover:text-amber-300 transition-colors text-sm">
                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                    Back to Recruitment Information
                </a>
            </div>
        </div>
        
        <!-- Download and Print Links - positioned above the Adobe widget area (hidden on mobile) -->
        <div class="hidden md:flex fixed top-48 right-5 z-50 gap-2">
            <a href="./assets/pdfs/Great Falls Police Department - Employment Application.pdf" 
               download="Great Falls Police Department - Employment Application.pdf"
               class="flex items-center gap-2 bg-amber-500 text-gray-900 font-semibold px-3 py-2 rounded-md hover:bg-amber-400 transition-colors shadow-lg">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                </svg>
                <span>Download</span>
            </a>
            <button onclick="printPDF()" 
                    class="flex items-center gap-2 bg-gray-600 text-white font-semibold px-3 py-2 rounded-md hover:bg-gray-500 transition-colors shadow-lg">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
                </svg>
                <span>Print</span>
            </button>
        </div>
        
        <!-- Mobile Warning Overlay (only shows on mobile) -->
        <div id="mobile-warning" class="fixed inset-0 bg-black/90 flex items-center justify-center z-50 md:hidden">
            <div class="bg-gray-800 p-6 mx-4 rounded-lg border border-amber-400 max-w-sm text-center">
                <div class="text-amber-400 text-4xl mb-4">📱</div>
                <h3 class="text-xl font-bold text-white mb-4">Better Experience Available</h3>
                <p class="text-gray-300 mb-6 text-sm">Our online application works best on desktop or laptop computers. For mobile devices, we recommend downloading or printing the form instead.</p>
                <div class="space-y-3">
                    <button id="download-mobile-btn" class="w-full bg-amber-500 text-gray-900 font-bold py-3 px-4 rounded hover:bg-amber-400 transition-colors flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        Download PDF
                    </button>
                    <button id="print-mobile-btn" class="w-full bg-gray-600 text-white font-bold py-3 px-4 rounded hover:bg-gray-500 transition-colors flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
                        </svg>
                        Print PDF
                    </button>
                    <button id="continue-mobile-btn" class="w-full bg-gray-700 text-gray-300 font-medium py-2 px-4 rounded hover:bg-gray-600 transition-colors text-sm">
                        Continue on Mobile Anyway
                    </button>
                </div>
            </div>
        </div>

        <!-- Adobe Webform (completely unconstrained) -->
        <div id="adobe-form-wrapper" style="position: relative;">
            <!-- Instructions overlay -->
            <div id="continue-instructions" class="absolute inset-0 bg-black/80 flex items-center justify-center z-10">
                <div class="bg-gray-800 p-8 rounded-lg border border-amber-400 max-w-md text-center">
                    <div class="text-amber-400 text-4xl mb-4">⚠️</div>
                    <h3 class="text-xl font-bold text-white mb-4">Action Required</h3>
                    <p class="text-gray-300 mb-4">Before you can fill out the application, please click the <strong class="text-amber-400">"Continue"</strong> button at the bottom of your screen.</p>
                    <p class="text-sm text-gray-400 mb-6">This is required by Adobe before you can access the form fields.</p>
                    <button id="got-it-btn" class="bg-amber-500 text-gray-900 font-bold py-2 px-6 rounded hover:bg-amber-400 transition-colors">
                        Got it, I'll click Continue
                    </button>
                </div>
            </div>
            <script type='text/javascript' language='JavaScript' src='https://na3.documents.adobe.com/public/embeddedWidget?wid=CBFCIBAA3AAABLblqZhB49goQcq6o-XaT1VYnGXvHVJZbcTeSqtR3_UD5PNB0vtV8gjUD1e4NKcQWf3SIl6w*'></script>
        </div>
    </main>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile Menu
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
                    mobileMenuButton.setAttribute('aria-expanded', !isExpanded);
                    mobileMenu.classList.toggle('hidden');
                });
            }

            // Fade in animations
            const animatedElements = document.querySelectorAll('.fade-in-up');
            if (animatedElements.length > 0) {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('is-visible');
                        }
                    });
                }, { threshold: 0.1 });
                animatedElements.forEach(el => { observer.observe(el); });
            }

            // Current year
            const yearSpan = document.getElementById('current-year');
            if (yearSpan) {
                yearSpan.textContent = new Date().getFullYear();
            }

            // Handle continue instructions overlay
            const continueInstructions = document.getElementById('continue-instructions');
            const gotItBtn = document.getElementById('got-it-btn');
            
            function hideOverlay() {
                if (continueInstructions) {
                    continueInstructions.style.display = 'none';
                }
            }
            
            if (gotItBtn) {
                gotItBtn.addEventListener('click', hideOverlay);
            }

            // Hide overlay when clicking outside the popup
            if (continueInstructions) {
                continueInstructions.addEventListener('click', function(e) {
                    // If the click is on the overlay background (not the popup content)
                    if (e.target === continueInstructions) {
                        hideOverlay();
                    }
                });
            }

            // Auto-hide overlay after 14 seconds if user hasn't clicked
            setTimeout(() => {
                if (continueInstructions && continueInstructions.style.display !== 'none') {
                    hideOverlay();
                }
            }, 14000);

            // Mobile warning overlay functionality
            const mobileWarning = document.getElementById('mobile-warning');
            const downloadMobileBtn = document.getElementById('download-mobile-btn');
            const printMobileBtn = document.getElementById('print-mobile-btn');
            const continueMobileBtn = document.getElementById('continue-mobile-btn');

            function downloadPDF() {
                const link = document.createElement('a');
                link.href = './assets/pdfs/Great Falls Police Department - Employment Application.pdf';
                link.download = 'Great Falls Police Department - Employment Application.pdf';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }

            if (downloadMobileBtn) {
                downloadMobileBtn.addEventListener('click', function() {
                    downloadPDF();
                    if (mobileWarning) {
                        mobileWarning.style.display = 'none';
                    }
                });
            }

            if (printMobileBtn) {
                printMobileBtn.addEventListener('click', function() {
                    printPDF();
                    if (mobileWarning) {
                        mobileWarning.style.display = 'none';
                    }
                });
            }

            if (continueMobileBtn) {
                continueMobileBtn.addEventListener('click', function() {
                    // Redirect to Adobe eSign widget
                    window.location.href = 'https://na3.documents.adobe.com/public/esignWidget?wid=CBFCIBAA3AAABLblqZhB49goQcq6o-XaT1VYnGXvHVJZbcTeSqtR3_UD5PNB0vtV8gjUD1e4NKcQWf3SIl6w*';
                });
            }

        });

        // Function to print the PDF
        function printPDF() {
            const pdfUrl = './assets/pdfs/Great Falls Police Department - Employment Application.pdf';
            
            // Create a new window for printing
            const printWindow = window.open(pdfUrl, '_blank');
            
            if (printWindow) {
                printWindow.onload = function() {
                    // Wait a moment for the PDF to load, then trigger print dialog
                    setTimeout(() => {
                        printWindow.print();
                        // Close the print window after printing (optional)
                        printWindow.onafterprint = function() {
                            printWindow.close();
                        };
                    }, 1000);
                };
            } else {
                // Fallback: direct download if popup is blocked
                const link = document.createElement('a');
                link.href = pdfUrl;
                link.download = 'Great Falls Police Department - Employment Application.pdf';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        }
    </script>
</body>
</html>